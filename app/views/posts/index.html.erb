<% @post.each do |post| %>
  <div class="card mb-4 rounded-3 shadow-sm">
    <div class="card-body">
      <p class="fw-bold">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" fill="#ee538d" class="bi bi-person-circle me-sm-1" viewBox="0 0 16 16">
          <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
          <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
        </svg>
        <%= link_to User.find(post.user_id).username, profile_path(User.find(post.user_id).id), class: "no-decoration" %>   
      </p>    
      <p><%= image_tag post.picture.url(:large), class: 'content-img img-show', alt: post.title if post.picture? %></p>
      <p> <%= post.body %> </p>
      
      <hr>
      <div class="row">
        <div class="col-md-1 text-start">
          <%= link_to post_path(post), class: "btn btn-lg btn-outline-pink" do %>
            <i class="bi-eye" ></i>  
          <% end %>
        </div>
      
      <% if user_signed_in? %>
        <div class="col-md-1 text-start">
          <% like = current_user.likes.find_by(post: post) %>
          <% if like.nil? %>
            <%= form_with model: @like, url: likes_path do |f| %>   
              <input type="hidden" name="like[post_id]" value="<%= post.id %>">
              <%= hidden_field :like, { :value => @like } %>
              <div class="row">
                <%= button_tag( :class => "btn btn-lg btn-outline-pink") do %>
                  <i class="bi-heart" style="font-style: normal"> 
                    <%= Like.where(post_id: post.id).count %> 
                  </i>
                <% end %>
              </div>
            <% end %>
          <% else %>
            <div class="row">
              <%= link_to like_path(like), method: :delete, class: "btn btn-lg btn-outline-pink" do %>
                <i class="bi-heart-fill" style="font-style: normal">
                  <%= Like.where(post_id: post.id).count %>
                </i>  
              <% end %>   
            </div>
          <% end %>
        </div>
        <% if current_user.id==User.find(post.user_id).id %>
          <div class="col-md-1 text-start">
            <%= link_to edit_post_path(post), class: "btn btn-lg btn-outline-pink" do %>
              <i class="bi-pen" ></i>  
            <% end %>
          </div>
          <div class="col-md-1 text-start">
            <%= link_to post_path(post),method: :delete, 
            data: {confirm: "Delete post?"}, class: "btn btn-lg btn-outline-pink" do %>
              <i class="bi-trash" ></i>  
            <% end %>
            
          </div>
        <% end%>
      <% end %>
      
      </div>
    </div>
  </div>
<% end %>